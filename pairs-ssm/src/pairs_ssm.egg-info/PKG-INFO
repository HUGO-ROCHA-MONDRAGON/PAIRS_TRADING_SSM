Metadata-Version: 2.4
Name: pairs-ssm
Version: 0.1.0
Summary: Pairs Trading with General State Space Models - Zhang (2021) Replication
Author: Quantitative Finance Project
License: MIT
Project-URL: Repository, https://github.com/caglanaz/Gestion-Quantitative
Keywords: pairs-trading,state-space-models,kalman-filter,quantitative-finance
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Financial and Insurance Industry
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Office/Business :: Financial :: Investment
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.24.0
Requires-Dist: pandas>=2.0.0
Requires-Dist: scipy>=1.10.0
Requires-Dist: matplotlib>=3.7.0
Requires-Dist: seaborn>=0.12.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: openpyxl>=3.1.0
Requires-Dist: numba>=0.57.0
Requires-Dist: tqdm>=4.65.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.0.270; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: ipykernel>=6.0.0; extra == "dev"
Requires-Dist: jupyter>=1.0.0; extra == "dev"

# Pairs Trading with General State Space Models

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

Replication and extension of:

> **Zhang, G. (2021).** "Pairs trading with general state space models"  
> *Quantitative Finance*, 21(9), 1567-1587.  
> DOI: [10.1080/14697688.2021.1890806](https://doi.org/10.1080/14697688.2021.1890806)

## Overview

This package implements a complete pairs trading framework using state-space models:

1. **Spread Construction**: OLS-based cointegrating relationship between two assets
2. **State-Space Filtering**: Kalman filter variants (Standard, Extended, QMCKF) to extract the latent spread
3. **Threshold Optimization**: Monte Carlo simulation to find optimal entry/exit thresholds
4. **Trading Strategies**: Three benchmark strategies (A, B, C) from the paper
5. **Backtesting**: Walk-forward validation with transaction costs

## Models Implemented

| Model | Description | Filter |
|-------|-------------|--------|
| Model I | Linear AR(1) with Gaussian noise | Standard KF |
| Model II | Heteroscedastic (state-dependent volatility) | Extended KF |
| Model 1-3 | Simulation specifications from Table 1 | - |

## Installation

```bash
# Clone the repository
git clone https://github.com/caglanaz/Gestion-Quantitative.git
cd Gestion-Quantitative/pairs-ssm

# Create virtual environment
python -m venv venv
source venv/bin/activate  # Linux/Mac
# or: venv\Scripts\activate  # Windows

# Install in development mode
pip install -e ".[dev]"
```

## Quick Start

### 1. Configuration

Edit `configs/default.yaml` to set your pair and parameters:

```yaml
pair:
  asset_a: "PEP US Equity"
  asset_b: "KO US Equity"
  start_date: "2012-01-03"
  end_date: "2019-06-28"
```

### 2. Command Line Usage

```bash
# Fit the state-space model
pairs-ssm fit --config configs/default.yaml

# Optimize thresholds via Monte Carlo
pairs-ssm optimize --config configs/default.yaml

# Run backtest
pairs-ssm backtest --config configs/default.yaml

# Generate report
pairs-ssm report --config configs/default.yaml
```

### 3. Python API

```python
from pairs_ssm.data import load_pair, compute_spread
from pairs_ssm.filtering import fit_model
from pairs_ssm.optimization import optimize_thresholds
from pairs_ssm.trading import Strategy
from pairs_ssm.backtest import run_backtest

# Load and prepare data
pair = load_pair("data/raw/dataGQ.xlsx", "PEP US Equity", "KO US Equity")
spread = compute_spread(pair, use_log=True)

# Fit state-space model
result = fit_model(spread, model_type="model_II")

# Optimize thresholds
optimal = optimize_thresholds(result, strategy="C", objective="SR")

# Run backtest
performance = run_backtest(spread, result, optimal, tc_bps=20)
```

## Project Structure

```
pairs-ssm/
├── configs/           # YAML configuration files
├── data/              # Data storage (raw, interim, processed)
├── notebooks/         # Jupyter notebooks for exploration
├── src/pairs_ssm/     # Main package source code
│   ├── data/          # Data loading and transformation
│   ├── models/        # State-space model definitions
│   ├── filtering/     # Kalman filter implementations
│   ├── trading/       # Strategy and portfolio logic
│   ├── optimization/  # Threshold optimization
│   ├── backtest/      # Backtesting engine
│   └── reporting/     # Tables, plots, exports
├── tests/             # Unit and integration tests
└── scripts/           # Standalone run scripts
```

## Key Results (PEP-KO Pair)

Using Model II (heteroscedastic) with Strategy C:

| Metric | Value |
|--------|-------|
| Annualized Return | ~21.86% |
| Sharpe Ratio | ~1.2 |
| Max Drawdown | ~8% |

## References

- Zhang, G. (2021). Pairs trading with general state space models. *Quantitative Finance*, 21(9), 1567-1587.
- Gatev, E., Goetzmann, W. N., & Rouwenhorst, K. G. (2006). Pairs trading: Performance of a relative-value arbitrage rule.
- Elliott, R. J., Van Der Hoek, J., & Malcolm, W. P. (2005). Pairs trading. *Quantitative Finance*, 5(3), 271-276.

## License

MIT License - see [LICENSE](LICENSE) for details.
